# sub-node-cvt

[English](./README.en.md) | **中文**

一个轻量、无状态、保护隐私的 Clash/Clash-Meta 订阅链接生成器。它允许用户通过一个简单的 Web 界面，将节点配置（YAML 格式）转换为功能强大的订阅链接，支持自定义规则、中转链（Relay）等高级功能。

得益于其无状态设计，后端服务不存储任何用户数据，所有配置信息都编码在生成的 URL 中，确保了极致的隐私和安全。

![alt text](image.png)

---

## ✨ 核心特性

-   **无状态与隐私优先**: 后端不存储任何用户数据，所有信息均在 URL 中动态处理。
-   **轻量化**: 使用 Go 编写的高性能后端和原生 Vue 3 构建的极简前端，资源占用极低。
-   **易于部署**: 可以作为单个二进制文件在本地/服务器运行，也完美契合 Cloudflare Workers 等 Serverless 平台。
-   **强大的配置能力**:
    -   支持 Clash Meta `proxies` YAML 格式的直接输入。
    -   支持中转链 (Relay / 链式代理) 配置。
    -   支持可插拔的规则集（如去广告、GFW 列表等）。
    -   自动生成代理组，包含所有原始节点和中转链。
-   **友好的用户界面**: 简洁直观的 Web UI，实时反馈，一键生成和复制订阅链接。

## 🛠️ 技术栈

-   **后端**: Go (Golang)
    -   Web 框架: `net/http` (标准库)
    -   YAML 处理: `gopkg.in/yaml.v3`
-   **前端**: Vue 3 (Composition API)
    -   UI: 自定义极简风格 CSS
    -   依赖: `js-yaml` (用于在前端解析节点名称)
-   **数据存储**: 无！ (所有配置模板和规则集都作为文件存储在项目仓库中)

## 🚀 快速开始

### 1. 环境要求

-   Go 1.18 或更高版本

### 2. 克隆仓库

```bash
git clone https://github.com/ShawnMa123/sub-node-cvt.git
cd sub-node-cvt
```

### 3. 安装依赖

Go 会在第一次运行时自动处理依赖，但你也可以手动安装。

```bash
go mod tidy
```

### 4. 本地运行

运行以下命令，它将同时启动后端 API 和前端静态文件服务器。

```bash
go run main.go
```

服务启动后，打开浏览器并访问 `http://localhost:8080`。

### 5. 如何使用

1.  **粘贴节点**: 将你的 Clash `proxies` 列表（YAML 格式）粘贴到第一个文本框中。
2.  **选择规则**: 勾选你希望启用的规则，如“屏蔽广告”、“GFW 规则”等。
3.  **(可选) 配置中转**:
    -   在节点输入框中填入内容后，下方的下拉菜单将被激活。
    -   选择一个“中转节点 (入口)”和一个“落地节点 (出口)”。
    -   点击“添加”按钮。你可以添加多个中转链。
4.  **生成链接**: 点击“🚀 生成订阅链接”按钮。
5.  **使用链接**:
    -   复制生成的订阅链接。
    -   将其添加到 Clash Meta 或其他兼容的客户端中。

## 部署

### 在普通服务器上部署

1.  **编译二进制文件**:
    为了获得最佳性能和兼容性，请为您的目标服务器编译。

    ```bash
    # 为 Linux 服务器编译
    CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o sub-node-cvt main.go
    ```

2.  **上传文件**:
    将以下文件和目录上传到您的服务器：
    -   `sub-node-cvt` (编译好的二进制文件)
    -   `frontend/` (整个目录)
    -   `templates/` (整个目录)
    -   `rulesets/` (整个目录)

3.  **运行服务**:
    在服务器上运行二进制文件。建议使用 `systemd` 或 `supervisor` 等工具来管理进程。

    ```bash
    ./sub-node-cvt
    ```

    服务将默认在 `8080` 端口上运行。您可以使用 Nginx 或 Caddy 等反向代理来配置域名和 HTTPS。

## 💡 未来展望

-   [ ] 支持更多类型的节点格式输入（如 V2RayN 分享链接）。
-   [ ] 适配 Cloudflare Workers 部署。
-   [ ] 允许用户提供自定义的规则集 URL。
-   [ ] 提供 Docker 镜像以便于容器化部署。

